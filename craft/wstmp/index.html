<script>
  function send() {
    ws.send(document.getElementById('msg').value);
  }

  var host = window.document.location.host.replace(/:.*/, '');
  var ws = new WebSocket('ws://' + host + ':3001');
  ws.onmessage = function (event) {
    document.getElementById("messages").innerHTML += "<div>" + JSON.parse(event.data) + "</div>";
    console.log(JSON.parse(event.data));
  };
</script>
 
 
<strong>ws chat</strong><br>
<input type="text" id="msg">
<input type="button" value="send" onclick="send()">
<br>
<hr>
<div id="messages">
 
 
</div>